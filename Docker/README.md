# Docker

Developer : 코드작성

Git : Merge Request or Push

CI : Test, Build

- 테스트, 빌드는 한 번만

CD : Deploy

- 배포는 여러번 해보면서 다양한 상황 확인

Server : cloud

Monitoring : Metrics(cpu, memory..), Log

<br>

#### Microservices

큰 기업일수록 한 조직에서 담당하는 개발의 범위가 지엽적, 집중적

<br>

<br>

## 서버를 관리한다는 것

### `서버의 역사`

#### 자체 서버 운영

- 서버 주문 > 서버 설치 > CPU, 메모리, HDD 조립 > 네트워크 연결 > OS 설치 > 계정 > 방화벽...
- 처음에는 하나하나 다 조립, 설치해야 해서 굉장히 복잡했음

#### 설정 관리 도구 등장(Chef, puppet, ansible 등)

- 상태 관리 도구
- 서버에 프로그램 설치를 할 때 뭘 설치했는지 문서로 남겼었는데 이제는 코드로 남김
- 코드로 남기기 시작했더니 협업도 되고 버전관리도 가능

#### 가상 머신 등장(Jenkins, Wordpress, Chat)

- 한 서버에 여러개 설치 가능

- 현재 상태를 저장

  ##### `단점`

- 처음부터 다시 세팅은 못함... 과정을 다 기록하고 있지 않기 때문에

- 서버 이미지 공유..? 에 어려움

- 굉장히 느림

#### 클라우드 등장(AWS)

- 하드웨어 파편화 해결

- 가상화된 환경만으로 아키텍처 구성이 가능

- 이미지를 기반으로 다수의 서버 상태 관리

  ##### `단점`

- 운영적 측면 : 누군가는 계속 서버실에 들어가서 관리해줘야 했음

#### PaaS 등장(Heroku, Hetlify, Google Cloud App Engine..)

- 소스코드만으로 배포가 가능하도록

- 일반화된 프로비저닝 방법을 제공

  ##### `단점`

- 애플리케이션을 PaaS에 맞게 작성해야 함

- 원격 접속 시스템 X

- 파일시스템 사용 X

- Site 패키지 설치 X

- 로그 수집을 제한적 방식으로 허용(STDOUT)

- 애플리케이션 배포에 대한 새로운 패러다임으로 또 새로운 공부를 해야 함

#### 도커 등장

- 도커 등장 후 서버관리/개발 방식 완전히 바뀜!

- 어떠한 프로그램도 **컨테이너**로 만들 수 있음

  - 컨테이너 : 격리된 환경에서 작동하는 프로세스

- 도커는 오픈소스고 어디서든 돌아감(Amazon, Azure, Google Cloud 등)

- 가상머신과는 차이가 있음

  - 가상머신처럼 독립적으로 실행하지만
  - VM보다 빠름
  - 쉬움
  - 효율적

- **자원격리**

  - 프로세스, 파일 디렉토리 가상 분리

- 코드를 작성하면 컨테이너로 Build를 하게 되면서 쉬워짐..?

  ##### `단점`

- 배포한 이후에 관리가 어려움

- 그 많은 컨테이너를 어떻게 다 올려서 배포를 하지?

- 롤아웃/롤백을 하나하나 다 해야해서 불편함

- 서비스 이상, 부하 모니터링을 어떻게 하지?

  - 서버가 죽어도 모를 수 있음

- 컨테이너 오케스트레이션

  - CLUSTER
    - 클러스터로 뭐 어떻게 관리한다고 했는데 잘 못들음..ㅠㅠ
  - STATE
    - 상태관리 : 사람이 직접 해줬던 걸 코드가 대신 해줌
  - SCHEDULING
    - 배포관리 : 비어있는 서버로 자동으로 띄워 줌
  - ROLLOUT/ROLLBACK
    - 배포 버전관리 : 알아서 업데이트, 문제 생기면 Rollback 간편
  - SERVICE DISCOVERY
    - 서비스 등록 및 조회
  - VOLUME
    - 볼륨 스토리지 : 잘 모르는 프로그램도 알아서 붙여줌

#### 쿠버네티스 등장

- 컨테이너를 **쉽고 빠르게 배포/확장**하고 **관리를 자동화**해주는 오픈소스 플랫폼
- **도커는 각 앱마다 필요한 환경을 컨테이너로 관리**
- **쿠버네티스는 각 컨테이너의 배포를 중앙관리하는 프로그램!!**

#### 서비스메시 등장











## DevOps 엔지니어











